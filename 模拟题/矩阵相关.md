# P3654 First Step (ファーストステップ)

[P3654 First Step (ファーストステップ) - 洛谷 | 计算机科学教育新生态](https://www.luogu.com.cn/problem/P3654)

## 题目背景

> **知らないことばかりなにもかもが（どうしたらいいの？）**    
> **一切的一切 尽是充满了未知数（该如何是好）**   
> **それでも期待で足が軽いよ（ジャンプだ！）**     
> **但我仍因满怀期待而步伐轻盈（起跳吧！）**       
> **温度差なんていつか消しちゃえってね**     
> **冷若冰霜的态度 有朝一日将会消失得无影无踪**      
> **元気だよ元気をだしていくよ**     
> **拿出活力 打起精神向前迈进吧**     

 ![](https://cdn.luogu.com.cn/upload/pic/4471.png) 

我们 Aqours，要第一次举办演唱会啦！

虽然学生会长看上去不怎么支持我们的样子，可是有了理事长的支持，我们还是被允许在校内的篮球场里歌唱！

歌曲也好好地准备过了，名字叫“[最喜欢的话就没问题！ (ダイスキだったらダイジョウブ！)](https://zh.moegirl.org/%E6%9C%80%E5%96%9C%E6%AC%A2%E7%9A%84%E8%AF%9D%E5%B0%B1%E6%B2%A1%E9%97%AE%E9%A2%98)“，大家一定会喜欢的吧！

演唱会一定会顺利进行的！

希望不要发生**停电**什么的事故哦……！

## 题目描述

可是……这个篮球场，好像很久没有使用过的样子啊……

里面堆满了学校的各种杂物呢……

我们 Aqours 的成员要怎么在里面列队站下呢？


我们浦之星女子学院的篮球场是一个 $R$ 行 $C$ 列的矩阵，其中堆满了各种学校的杂物 (用 `#` 表示)，空地 (用 `.` 表示) 好像并不多的样子呢……

我们 Aqours 现在已经一共有 $K$ 个队员了，要歌唱舞蹈起来的话，我们得排成一条 $1\times K$ 的直线，一个接一个地站在篮球场的空地上呢 (横竖均可)。

我们想知道一共有多少种可行的站位方式呢。

Aqours 的真正的粉丝的你，能帮我们算算吗？

## 输入格式

第一行三个整数 $R, C, K$。

接下来的 $R$ 行 $C$ 列，表示浦之星女子学院篮球场。

## 输出格式

总共的站位方式数量。

## 样例 #1

### 样例输入 #1

```
5 5 2
.###.
##.#.
..#..
#..#.
#.###
```

### 样例输出 #1

```
8
```

## 提示

|           |    $R$     |    $C$     |       $K$        |   备注   |
| :-------: | :--------: | :--------: | :--------------: | :------: |
| $1\sim2$  | $\leq 10$  | $\leq 10$  | $\leq \min(R,C)$ |    无    |
| $3\sim4$  | $\leq 100$ | $\leq 100$ |     $\leq 1$     |    无    |
| $5\sim6$  | $\leq 100$ | $\leq 100$ | $\leq \min(R,C)$ | 没有障碍 |
| $7\sim10$ | $\leq 100$ | $\leq 100$ | $\leq \min(R,C)$ |    无    |

对于所有数据，$1 \leq R,C \leq 100$，$1 \leq k \leq \min(R,C)$。

#### 以下是彩蛋

在 LoveLive!Sunshine!! 动画第一季第三集中，Aqours 队长高海千歌演唱“最喜欢的话就没问题！”到副歌前时，学校因为雷击停电。





# 思路：

+ 我们可以枚举每一行中所有长度>=k的片段，设这个片段长度为L，则每一个这种片段能够产生的结果数为==L-k+1==
+ 每一列也是如此，只需要注意一些细节即可
+ 当k==1，我们需要特判，因为行和列都数了一遍，所以说需要/2。
+ 枚举每一个片段什么时候结束呢？以枚举每一行中的片段举例，当我们当前遍历到的值为=='#'==时，结束。或者当我们达到了最后一列，也就是==j等于c==时，我们就结束了当前片段的搜索

```cpp
#include<iostream>
using namespace std;
char a[105][105];
int r, c, k;
int ans;
int main()
{
	cin >> r >> c >> k;
	for (int i = 1; i <= r; i++) {
		for (int j = 1; j <= c; j++) {
			cin >> a[i][j];
		}
	}

	for (int i = 1; i <= r; i++) {
		int curlength = 0;
		for (int j = 1; j <= c; j++) {
			if (a[i][j] == '.') curlength++;
			if (a[i][j] == '#' || j == c) {
				if (curlength >= k) 	ans += curlength - k + 1;
				curlength = 0;
			}
		}
	}
	//在这里i是列数，j是行数，别弄反了
	for (int i = 1; i <= c; i++) {
		int curlength = 0;
		for (int j = 1; j <= r; j++) {
			if (a[j][i] == '.') curlength++;
            //当枚举到最后一行，可能就结束了。
			if (a[j][i] == '#' || j ==r) {
				if(curlength>=k) 	ans += curlength - k + 1;
				curlength = 0;
			}
		}
	}
    //特判一下k==1的情况
	if(k==1) ans/=2;
	cout << ans;
	return 0;
}
```

